<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <template id="report_job_card_template">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="web.external_layout">

                        <t t-set="address">
                            <div>
                                <div class="fw-bold">
                                    <span t-field="o.customer_name" />
                                </div>
                            </div>
                        </t>

                        <div class="page">
                            <div class="oe_structure" />

                            <div class="mt-4">
                                <t t-set="layout_document_title"> Service Booking # <span
                                        t-field="o.name" />
                                </t>
                            </div>

                            <div class="row mt32 mb32 g-3">
                                <div class="col-6">
                                    <table class="table table-sm table-borderless mb-0 align-middle">
                                        <tbody>
                                            <tr>
                                                <td colspan="2" class="pb-2">
                                                    <div class="border-bottom pb-1 me-3">
                                                        <h4 class="mb-0">Customer Info</h4>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr t-if="o.customer_name">
                                                <td class="text-muted" style="width: 45%;">Customer</td>
                                                <td class="fw-semibold">
                                                    <span t-field="o.customer_name" />
                                                </td>
                                            </tr>
                                            <tr t-if="o.contact_number">
                                                <td class="text-muted">Contact Number</td>
                                                <td>
                                                    <span t-field="o.contact_number" />
                                                </td>
                                            </tr>
                                            <tr t-if="o.contact_email">
                                                <td class="text-muted">Contact Email</td>
                                                <td>
                                                    <span t-field="o.contact_email" />
                                                </td>
                                            </tr>
                                            <tr t-if="o.plat_number">
                                                <td class="text-muted">Plate
                                                    Number</td>
                                                <td class="fw-semibold">
                                                    <span t-field="o.plat_number" />
                                                </td>
                                            </tr>
                                            <tr t-if="o.vehicle_brand">
                                                <td class="text-muted">Vehicle Brand</td>
                                                <td>
                                                    <span t-field="o.vehicle_brand.name" />
                                                </td>
                                            </tr>
                                            <tr t-if="o.vehicle_model">
                                                <td class="text-muted">Vehicle Model</td>
                                                <td>
                                                    <span t-field="o.vehicle_model.name" />
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                                <div class="col-6">
                                    <table class="table table-sm table-borderless mb-0 align-middle">
                                        <tbody>
                                            <tr>
                                                <td colspan="2" class="pb-2">
                                                    <div class="border-bottom pb-1 me-3">
                                                        <h4 class="mb-0">Service Info</h4>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr t-if="o.service_type">
                                                <td class="text-muted" style="width: 45%;">Service
                                                    Type</td>
                                                <td>
                                                    <span t-field="o.service_type.name" />
                                                </td>
                                            </tr>
                                            <tr t-if="o.supervisor_user_id">
                                                <td class="text-muted">Supervisor</td>
                                                <td>
                                                    <span t-field="o.supervisor_user_id.name" />
                                                </td>
                                            </tr>
                                            <tr t-if="o.assigned_technician_id">
                                                <td class="text-muted">Technician</td>
                                                <td>
                                                    <span t-field="o.assigned_technician_id.name" />
                                                </td>
                                            </tr>
                                            <tr t-if="o.state">
                                                <td class="text-muted">Status</td>
                                                <td>
                                                    <span t-field="o.state" />
                                                </td>
                                            </tr>

                                        </tbody>
                                    </table>
                                </div>

                            </div>

                            <t t-if="o.complaint_issue">
                                <div class="row mt-4 mb-2">
                                    <div class="col-6">
                                        <div class="border-bottom pb-1 me-3">
                                            <h4 class="mb-0">Complaints / Issues</h4>
                                        </div>
                                    </div>
                                </div>
                                <p t-field="o.complaint_issue" class="mb-0"
                                    style="white-space: pre-wrap;" />
                            </t>

                            <div class="oe_structure" />
                        </div>

                    </t>
                </t>
            </t>
        </template>

        <template id="report_service_booking_full_template">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="web.external_layout">

                        <t t-set="currency" t-value="o.currency_id or o.company_id.currency_id" />

                        <t t-set="address">
                            <div>
                                <div class="fw-bold">
                                    <span t-field="o.customer_name" />
                                </div>
                            </div>
                        </t>

                        <div class="page">
                            <div class="oe_structure" />

                            <div class="mt-4">
                                <t t-set="layout_document_title"> Service Booking # <span
                                        t-field="o.name" />
                                </t>
                            </div>

                            <div class="row mt32 mb32 g-3">
                                <div class="col-6">
                                    <table class="table table-sm table-borderless mb-0 align-middle">
                                        <tbody>
                                            <tr>
                                                <td colspan="2" class="pb-2">
                                                    <div class="border-bottom pb-1 me-3">
                                                        <h4 class="mb-0">Customer Info</h4>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr t-if="o.customer_name">
                                                <td class="text-muted" style="width: 45%;">Customer</td>
                                                <td class="fw-semibold">
                                                    <span t-field="o.customer_name" />
                                                </td>
                                            </tr>
                                            <tr t-if="o.contact_number">
                                                <td class="text-muted">Contact Number</td>
                                                <td>
                                                    <span t-field="o.contact_number" />
                                                </td>
                                            </tr>
                                            <tr t-if="o.contact_email">
                                                <td class="text-muted">Contact Email</td>
                                                <td>
                                                    <span t-field="o.contact_email" />
                                                </td>
                                            </tr>
                                            <tr t-if="o.plat_number">
                                                <td class="text-muted">Plate
                                                    Number</td>
                                                <td class="fw-semibold">
                                                    <span t-field="o.plat_number" />
                                                </td>
                                            </tr>
                                            <tr t-if="o.vehicle_brand">
                                                <td class="text-muted">Vehicle Brand</td>
                                                <td>
                                                    <span t-field="o.vehicle_brand.name" />
                                                </td>
                                            </tr>
                                            <tr t-if="o.vehicle_model">
                                                <td class="text-muted">Vehicle Model</td>
                                                <td>
                                                    <span t-field="o.vehicle_model.name" />
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                                <div class="col-6">
                                    <table class="table table-sm table-borderless mb-0 align-middle">
                                        <tbody>
                                            <tr>
                                                <td colspan="2" class="pb-2">
                                                    <div class="border-bottom pb-1 me-3">
                                                        <h4 class="mb-0">Service Info</h4>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr t-if="o.service_type">
                                                <td class="text-muted" style="width: 45%;">Service
                                                    Type</td>
                                                <td>
                                                    <span t-field="o.service_type.name" />
                                                </td>
                                            </tr>
                                            <tr t-if="o.supervisor_user_id">
                                                <td class="text-muted">Supervisor</td>
                                                <td>
                                                    <span t-field="o.supervisor_user_id.name" />
                                                </td>
                                            </tr>
                                            <tr t-if="o.assigned_technician_id">
                                                <td class="text-muted">Technician</td>
                                                <td>
                                                    <span t-field="o.assigned_technician_id.name" />
                                                </td>
                                            </tr>
                                            <tr t-if="o.state">
                                                <td class="text-muted">Status</td>
                                                <td>
                                                    <span t-field="o.state" />
                                                </td>
                                            </tr>

                                        </tbody>
                                    </table>
                                </div>

                            </div>

                            <t t-if="o.complaint_issue">
                                <div class="row mt-4 mb-2">
                                    <div class="col-6">
                                        <div class="border-bottom pb-1 me-3">
                                            <h4 class="mb-0">Complaints / Issues</h4>
                                        </div>
                                    </div>
                                </div>
                                <p t-field="o.complaint_issue" class="mb-0"
                                    style="white-space: pre-wrap;" />
                            </t>

                            <t t-if="o.inspection_checklist_line_ids">
                                <div class="row mt-4 pt-2">
                                    <div class="col-6">
                                        <div class="border-bottom pb-1 me-3">
                                            <h4 class="mb-0">Inspection Checklist</h4>
                                        </div>
                                    </div>
                                </div>
                                <table class="table table-sm o_main_table table-borderless mt-4">
                                    <thead>
                                        <tr>
                                            <th class="text-start">
                                                <strong>Inspection Type</strong>
                                            </th>
                                            <th class="text-end">
                                                <strong>Status</strong>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <t t-foreach="o.inspection_checklist_line_ids" t-as="line">
                                            <tr>
                                                <td class="text-start">
                                                    <span t-field="line.inspection_type_id.name" />
                                                </td>
                                                <td class="text-end">
                                                    <t t-if="line.checklist_ok">OK</t>
                                                    <t t-else="">NOT OK</t>
                                                </td>
                                            </tr>
                                        </t>
                                    </tbody>
                                </table>
                            </t>

                            <div style="page-break-before: always;">
                                <t t-if="o.spare_part_line_ids or o.service_line_ids">
                                    <div class="row mt-4">
                                        <div class="col-6">
                                            <div class="border-bottom pb-1 me-3">
                                                <h4 class="mb-0">Billing Details</h4>
                                            </div>
                                        </div>
                                    </div>
                                    <table
                                        class="o_has_total_table table o_main_table table-borderless mt-4">
                                        <thead style="display: table-row-group">
                                            <tr>
                                                <th class="text-start">
                                                    <strong>Description</strong>
                                                </th>
                                                <th class="text-end">
                                                    <strong>Qty</strong>
                                                </th>
                                                <th class="text-end">
                                                    <strong>Unit Price</strong>
                                                </th>
                                                <th class="text-end">
                                                    <strong>Amount</strong>
                                                </th>
                                            </tr>
                                        </thead>

                                        <tbody>

                                            <t t-if="o.spare_part_line_ids">
                                                <tr class="fw-bolder o_line_section">
                                                    <td colspan="99" id="section">Spare Parts</td>
                                                </tr>

                                                <t t-foreach="o.spare_part_line_ids" t-as="line">
                                                    <tr>
                                                        <td class="text-start">
                                                            <span t-field="line.product_id.name" />
                                                        </td>
                                                        <td class="text-end">
                                                            <span t-field="line.qty" />
                                                        </td>
                                                        <td class="text-end">
                                                            <span t-field="line.unit_price"
                                                                t-options="{'widget': 'monetary', 'display_currency': currency}" />
                                                        </td>
                                                        <td class="text-end">
                                                            <span t-field="line.subtotal"
                                                                t-options="{'widget': 'monetary', 'display_currency': currency}" />
                                                        </td>
                                                    </tr>
                                                </t>

                                                <tr class="is-subtotal text-end">
                                                    <td colspan="99" id="subtotal">
                                                        <strong class="me-3">Subtotal</strong>
                                                        <span t-field="o.total_sparepart"
                                                            t-options="{'widget': 'monetary', 'display_currency': currency}" />
                                                    </td>
                                                </tr>
                                            </t>

                                            <t t-if="o.service_line_ids">
                                                <tr class="fw-bolder o_line_section">
                                                    <td colspan="99" id="section">Services</td>
                                                </tr>

                                                <t t-foreach="o.service_line_ids" t-as="line">
                                                    <tr>
                                                        <td class="text-start">
                                                            <span t-field="line.product_id.name" />
                                                        </td>
                                                        <td class="text-end">
                                                            <span t-field="line.qty" />
                                                        </td>
                                                        <td class="text-end">
                                                            <span t-field="line.unit_price"
                                                                t-options="{'widget': 'monetary', 'display_currency': currency}" />
                                                        </td>
                                                        <td class="text-end">
                                                            <span t-field="line.subtotal"
                                                                t-options="{'widget': 'monetary', 'display_currency': currency}" />
                                                        </td>
                                                    </tr>
                                                </t>

                                                <tr class="is-subtotal text-end">
                                                    <td colspan="99" id="subtotal">
                                                        <strong class="me-3">Subtotal</strong>
                                                        <span t-field="o.total_service_fee"
                                                            t-options="{'widget': 'monetary', 'display_currency': currency}" />
                                                    </td>
                                                </tr>
                                            </t>

                                        </tbody>
                                    </table>
                                </t>

                                <div id="total" class="row justify-content-end mt-n3">
                                    <div class="col-4">
                                        <table class="o_total_table table table-borderless">
                                            <tbody>
                                                <tr>
                                                    <td class="text-end">
                                                        <strong>Total Spare Parts</strong>
                                                    </td>
                                                    <td class="text-end">
                                                        <span t-field="o.total_sparepart"
                                                            t-options="{'widget': 'monetary', 'display_currency': currency}" />
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="text-end">
                                                        <strong>Total Services</strong>
                                                    </td>
                                                    <td class="text-end">
                                                        <span t-field="o.total_service_fee"
                                                            t-options="{'widget': 'monetary', 'display_currency': currency}" />
                                                    </td>
                                                </tr>
                                                <tr class="o_total">
                                                    <td class="text-end">
                                                        <strong>Total</strong>
                                                    </td>
                                                    <td class="text-end">
                                                        <span t-field="o.total_amount"
                                                            t-options="{'widget': 'monetary', 'display_currency': currency}" />
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <div class="oe_structure" />
                        </div>

                    </t>
                </t>
            </t>
        </template>

    </data>
</odoo>